[{"path":"https://boyercb.github.io/cfperformance/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 Christopher Boyer, Issa Dahabreh, Jon Steingrimsson Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Introduction to cfperformance","text":"cfperformance package provides methods estimating prediction model performance hypothetical (counterfactual) interventions. essential : Prediction models deployed settings treatment policies differ training - model trained patients received mixture treatments may perform differently deployed everyone receives specific treatment. Predictions support treatment decisions - predictions inform receive treatment, naive performance estimates conflate model accuracy treatment effects. methods implemented based Boyer, Dahabreh & Steingrimsson (2025), “Estimating evaluating counterfactual prediction models,” Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Introduction to cfperformance","text":"","code":"# Install from GitHub # install.packages(\"devtools\") devtools::install_github(\"boyercb/cfperformance\")"},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick Start","title":"Introduction to cfperformance","text":"cvd_sim dataset contains simulated cardiovascular data : - age, bp, chol: Patient covariates - treatment: Binary treatment indicator (confounded covariates) - event: Binary outcome (cardiovascular event) - risk_score: Pre-computed predictions logistic regression model","code":"# Load the included example dataset data(cvd_sim) head(cvd_sim) #>          age          bp        chol treatment event risk_score #> 1 -0.2078913  0.92673619  0.51441033         1     0 0.16456973 #> 2 -1.2517361 -0.07559820  1.85761302         1     0 0.06879905 #> 3  1.7957878  0.16615295 -1.09269567         0     0 0.23461394 #> 4 -1.2464064 -1.40349275  1.05642052         0     0 0.02765908 #> 5 -0.5880067 -0.08772247  1.18161254         1     0 0.08778086 #> 6 -0.9132198  0.16445812 -0.03630469         1     0 0.06799805"},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"estimating-counterfactual-mse","dir":"Articles","previous_headings":"Quick Start","what":"Estimating Counterfactual MSE","title":"Introduction to cfperformance","text":"Now can estimate well model perform everyone untreated (treatment_level = 0): doubly robust estimator adjusts confounding using propensity score model outcome model, providing consistent estimates even one model misspecified.","code":"# Estimate MSE under counterfactual \"no treatment\" policy mse_result <- cf_mse(   predictions = cvd_sim$risk_score,   outcomes = cvd_sim$event,   treatment = cvd_sim$treatment,   covariates = cvd_sim[, c(\"age\", \"bp\", \"chol\")],   treatment_level = 0,   estimator = \"dr\"  # doubly robust estimator )  mse_result #>  #> Counterfactual MSE Estimation #> ----------------------------------------  #> Estimator: dr  #> Treatment level: 0  #> N observations: 1000  #>  #> Estimate: 0.1061 (SE: 0.0092 ) #> 95% CI: [0.0891, 0.125] #>  #> Naive estimate: 0.1061"},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"comparing-estimators","dir":"Articles","previous_headings":"Quick Start","what":"Comparing Estimators","title":"Introduction to cfperformance","text":"Let’s compare available estimators: naive: Simply computes MSE subset target treatment level. Biased treatment confounded. cl (Conditional Loss): Models outcome integrates covariate distribution. ipw (Inverse Probability Weighting): Reweights observations mimic counterfactual population. dr (Doubly Robust): Combines outcome modeling IPW; consistent either model correct.","code":"estimators <- c(\"naive\", \"cl\", \"ipw\", \"dr\") results <- sapply(estimators, function(est) {   cf_mse(     predictions = cvd_sim$risk_score,     outcomes = cvd_sim$event,     treatment = cvd_sim$treatment,     covariates = cvd_sim[, c(\"age\", \"bp\", \"chol\")],     treatment_level = 0,     estimator = est   )$estimate }) names(results) <- estimators round(results, 4) #>  naive     cl    ipw     dr  #> 0.1061 0.1055 0.1924 0.1061"},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"estimating-counterfactual-auc","dir":"Articles","previous_headings":"Quick Start","what":"Estimating Counterfactual AUC","title":"Introduction to cfperformance","text":"discrimination (AUC), can use similar methods:","code":"auc_result <- cf_auc(   predictions = cvd_sim$risk_score,   outcomes = cvd_sim$event,   treatment = cvd_sim$treatment,   covariates = cvd_sim[, c(\"age\", \"bp\", \"chol\")],   treatment_level = 0,   estimator = \"dr\" )  auc_result #>  #> Counterfactual AUC Estimation #> ----------------------------------------  #> Estimator: dr  #> Treatment level: 0  #> N observations: 1000  #>  #> Estimate: 0.6702 (SE: 0.0383 ) #> 95% CI: [0.5911, 0.7472] #>  #> Naive estimate: 0.7201"},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"bootstrap-standard-errors","dir":"Articles","previous_headings":"Quick Start","what":"Bootstrap Standard Errors","title":"Introduction to cfperformance","text":"functions support bootstrap standard errors:","code":"mse_with_se <- cf_mse(   predictions = predictions,   outcomes = outcome,   treatment = treatment,   covariates = data.frame(x1, x2),   treatment_level = 0,   estimator = \"dr\",   se_method = \"bootstrap\",   n_boot = 500 ) summary(mse_with_se)"},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"calibration-curves","dir":"Articles","previous_headings":"","what":"Calibration Curves","title":"Introduction to cfperformance","text":"package also supports counterfactual calibration assessment:","code":"cal_result <- cf_calibration(   predictions = predictions,   outcomes = outcome,   treatment = treatment,   covariates = data.frame(x1, x2),   treatment_level = 0 )  # Plot calibration curve plot(cal_result)"},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"cross-validation-for-model-selection","dir":"Articles","previous_headings":"","what":"Cross-Validation for Model Selection","title":"Introduction to cfperformance","text":"comparing multiple prediction models, use counterfactual cross-validation:","code":"# Compare two models using counterfactual CV models <- list(   \"Simple\" = event ~ age,   \"Full\" = event ~ age + bp + chol )  comparison <- cf_compare(   models = models,   data = cvd_sim,   treatment = \"treatment\",   treatment_level = 0,   metric = \"mse\",   K = 5 )  comparison #>  #> Counterfactual Model Comparison #> ---------------------------------------------  #> Method: cv (K = 5 ) #> Estimator: dr  #>  #>   model mse_mean mse_se mse_naive_mean #>  Simple   0.1085 0.0088      0.1121394 #>    Full   0.1070 0.0063      0.1072778 #>  #> Best model: Full"},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"why-counterfactual-performance","dir":"Articles","previous_headings":"Key Concepts","what":"Why Counterfactual Performance?","title":"Introduction to cfperformance","text":"Standard model performance evaluation computes metrics like MSE AUC test set. However, answers: “well model predict outcomes occurred?” model used inform treatment decisions, often need answer: “well model predict outcomes everyone received (didn’t receive) treatment?” can differ substantially : Treatment related outcome (treatment effects exist) Treatment related covariates used prediction (confounding)","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"assumptions","dir":"Articles","previous_headings":"Key Concepts","what":"Assumptions","title":"Introduction to cfperformance","text":"methods package require: Consistency: Observed outcomes equal potential outcomes observed treatment. Positivity: covariate patterns positive probability receiving treatment level. unmeasured confounding: Treatment independent potential outcomes given measured covariates. standard causal inference assumptions. package provides warnings positivity may violated (extreme propensity scores).","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"choosing-an-estimator","dir":"Articles","previous_headings":"Key Concepts","what":"Choosing an Estimator","title":"Introduction to cfperformance","text":"Use doubly robust (dr) default - ’s consistent either propensity outcome model correct. Use ipw trust propensity model outcome model. Use cl trust outcome model propensity model. Use naive baseline comparison.","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/introduction.html","id":"further-reading","dir":"Articles","previous_headings":"","what":"Further Reading","title":"Introduction to cfperformance","text":"Boyer CB, Dahabreh IJ, Steingrimsson JA. Counterfactual prediction model performance. Statistics Medicine. 2025; 44(23-24):e70287. doi:10.1002/sim.70287 Dahabreh IJ, Robertson SE, Steingrimsson JA. Extending inferences randomized trial new target population. Statistics Medicine. 2020. Bang H, Robins JM. Doubly robust estimation missing data causal inference models. Biometrics. 2005.","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Transportability Analysis with cfperformance","text":"vignette demonstrates use transportability functions cfperformance evaluate prediction model performance transporting source population (randomized controlled trial) target population. methods based Voter et al. (2025), “Transportability machine learning-based counterfactual prediction models application CASS,” Diagnostic Prognostic Research, 9(4). doi:10.1186/s41512-025-00201-y","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"when-to-use-transportability-analysis","dir":"Articles","previous_headings":"","what":"When to Use Transportability Analysis","title":"Transportability Analysis with cfperformance","text":"Transportability analysis appropriate : prediction model trained one population (e.g., RCT) want evaluate performance different target population Treatment randomized source population Covariates measured populations Common scenarios include: Evaluating RCT-derived risk score real-world patient population Assessing whether clinical prediction rule “transports” new setting Understanding model performance varies across populations","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"the-setting","dir":"Articles","previous_headings":"","what":"The Setting","title":"Transportability Analysis with cfperformance","text":"Consider two populations: Source (S=1): Often RCT treatment randomized Target (S=0): population want deploy model observe: - Covariates X populations - Treatment populations - Outcomes Y source (possibly target) - Model predictions g(X) individuals goal estimate counterfactual prediction performance E[L(Ya,g(X))|S=0]E[L(Y^, g(X)) | S=0] — well model perform target population everyone received treatment level ?","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"using-the-included-example-data","dir":"Articles","previous_headings":"","what":"Using the Included Example Data","title":"Transportability Analysis with cfperformance","text":"package includes simulated transportability dataset: transport_sim dataset contains: - age, biomarker, smoking: Patient covariates - source: Population indicator (1 = source/RCT, 0 = target) - treatment: Binary treatment (randomized source, confounded target) - event: Binary outcome - risk_score: Predictions model trained source population","code":"data(transport_sim) head(transport_sim) #>           age  biomarker smoking source treatment event risk_score #> 1  0.61691842 -0.5700952       0      0         1     0  0.2603127 #> 2  0.04053456  0.3601832       0      1         1     1  0.2962904 #> 3  0.76704199  0.4024288       1      1         0     1  0.3855963 #> 4  1.25892520 -1.5801491       0      0         1     1  0.2253197 #> 5  0.37086452  0.1336976       0      0         0     1  0.2972428 #> 6 -0.15499910  0.5227082       0      1         0     0  0.2978064  # Population sizes cat(\"Source (RCT) n =\", sum(transport_sim$source == 1), \"\\n\") #> Source (RCT) n = 802 cat(\"Target n =\", sum(transport_sim$source == 0), \"\\n\") #> Target n = 698"},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"transport-analysis","dir":"Articles","previous_headings":"","what":"Transport Analysis","title":"Transportability Analysis with cfperformance","text":"transport analysis uses outcomes source/RCT estimate performance target population. useful : Outcomes observed RCT want leverage randomization source","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"transportable-mse","dir":"Articles","previous_headings":"Transport Analysis","what":"Transportable MSE","title":"Transportability Analysis with cfperformance","text":"","code":"mse_result <- tr_mse(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,   covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,  # Evaluate under no treatment   analysis = \"transport\",   estimator = \"dr\",   se_method = \"none\" )  print(mse_result) #>  #> Transportable MSE Estimation #> ---------------------------------------------  #> Analysis: transport  #> Estimator: dr  #> Treatment level: 0  #> N target: 698  | N source: 802  #>  #> Estimate: 0.2432 #>  #> Naive estimate: 0.227"},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"comparing-estimators","dir":"Articles","previous_headings":"Transport Analysis","what":"Comparing Estimators","title":"Transportability Analysis with cfperformance","text":"Let’s compare four estimators: naive: Uses source data =0 (ignores population differences) om (outcome model): Models E[L|X,,S=1] averages target X ipw: Reweights source observations match target population dr (doubly robust): Combines outcome modeling IPW","code":"estimators <- c(\"naive\", \"om\", \"ipw\", \"dr\")  mse_estimates <- sapply(estimators, function(est) {   result <- tr_mse(     predictions = transport_sim$risk_score,     outcomes = transport_sim$event,     treatment = transport_sim$treatment,     source = transport_sim$source,     covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],     treatment_level = 0,     analysis = \"transport\",     estimator = est,     se_method = \"none\"   )   result$estimate })  data.frame(   Estimator = estimators,   MSE = round(mse_estimates, 4) ) #>       Estimator    MSE #> naive     naive 0.2270 #> om           om 0.2451 #> ipw         ipw 0.2406 #> dr           dr 0.2432"},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"transportable-auc","dir":"Articles","previous_headings":"Transport Analysis","what":"Transportable AUC","title":"Transportability Analysis with cfperformance","text":"discrimination, can estimate transportable AUC:","code":"auc_result <- tr_auc(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,   covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,   analysis = \"transport\",   estimator = \"dr\",   se_method = \"none\" )  print(auc_result) #>  #> Transportable AUC Estimation #> ---------------------------------------------  #> Analysis: transport  #> Estimator: dr  #> Treatment level: 0  #> N target: 698  | N source: 802  #>  #> Estimate: 0.7021 #>  #> Naive estimate: 0.6915"},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"transportable-calibration","dir":"Articles","previous_headings":"Transport Analysis","what":"Transportable Calibration","title":"Transportability Analysis with cfperformance","text":"assess calibration target population: Transportable calibration curve target population","code":"calib_result <- tr_calibration(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,   covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,   analysis = \"transport\",   estimator = \"ipw\",   smoother = \"loess\",   se_method = \"none\" )  print(calib_result) #>  #> Transportable CALIBRATION Estimation #> ---------------------------------------------  #> Analysis: transport  #> Estimator: ipw  #> Treatment level: 0  #> N target: 698  | N source: 802  #>  #> Calibration Metrics: #>   ICI (Integrated Calibration Index): 0.1117  #>   E50 (Median absolute error): 0.0956  #>   E90 (90th percentile error): 0.2335  #>   Emax (Maximum error): 0.2796 plot(calib_result)"},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"joint-analysis","dir":"Articles","previous_headings":"","what":"Joint Analysis","title":"Transportability Analysis with cfperformance","text":"joint analysis pools source target data potentially efficient estimation. requires outcome data populations.","code":"mse_joint <- tr_mse(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,   covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,   analysis = \"joint\",  # Pool data   estimator = \"dr\",   se_method = \"none\" )  cat(\"Transport MSE:\", round(mse_result$estimate, 4), \"\\n\") #> Transport MSE: 0.2432 cat(\"Joint MSE:\", round(mse_joint$estimate, 4), \"\\n\") #> Joint MSE: 0.242"},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"bootstrap-standard-errors","dir":"Articles","previous_headings":"","what":"Bootstrap Standard Errors","title":"Transportability Analysis with cfperformance","text":"inference, use bootstrap standard errors: stratified_boot = TRUE option (default) ensures bootstrap samples preserve ratio source target observations, recommended transportability analysis.","code":"mse_with_se <- tr_mse(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,   covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,   analysis = \"transport\",   estimator = \"dr\",   se_method = \"bootstrap\",   n_boot = 500,   stratified_boot = TRUE  # Preserve source/target ratio )  summary(mse_with_se) confint(mse_with_se)"},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"key-assumptions","dir":"Articles","previous_headings":"","what":"Key Assumptions","title":"Transportability Analysis with cfperformance","text":"transportability estimators rely several assumptions:","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"positivity-of-selection","dir":"Articles","previous_headings":"Key Assumptions","what":"1. Positivity of Selection","title":"Transportability Analysis with cfperformance","text":"P(S=0|X)>0 P(S=1|X)>0 XP(S=0|X) > 0 \\text{ } P(S=1|X) > 0 \\text{ } X populations must positive probability covariate values.","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"positivity-of-treatment","dir":"Articles","previous_headings":"Key Assumptions","what":"2. Positivity of Treatment","title":"Transportability Analysis with cfperformance","text":"P(=|X,S=1)>0 treatment level interestP(=|X, S=1) > 0 \\text{ treatment level interest} source population, treatment level must positive probability.","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"conditional-exchangeability-transportability","dir":"Articles","previous_headings":"Key Assumptions","what":"3. Conditional Exchangeability (Transportability)","title":"Transportability Analysis with cfperformance","text":"(Ya⊥S)|X(Y^\\perp S) | X potential outcome independent population membership given covariates. means source population “representative” outcome model perform target, conditioning X.","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"consistency","dir":"Articles","previous_headings":"Key Assumptions","what":"4. Consistency","title":"Transportability Analysis with cfperformance","text":"Y=YAY = Y^observed outcome equals potential outcome received treatment.","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"comparison-with-cf_-functions","dir":"Articles","previous_headings":"","what":"Comparison with cf_* Functions","title":"Transportability Analysis with cfperformance","text":"cf_* functions (counterfactual) single-population analysis: Use observational data one population Adjust confounding treatment outcome Equivalent “Observational (OBS)” estimators Voter et al. tr_* functions (transportability) two-population analysis: Transport source target population Leverage randomization source (RCT) Adjust differences covariate distributions","code":""},{"path":"https://boyercb.github.io/cfperformance/articles/transportability.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Transportability Analysis with cfperformance","text":"Voter, S. R., et al. (2025). “Transportability machine learning-based counterfactual prediction models application CASS.” Diagnostic Prognostic Research, 9(4). doi:10.1186/s41512-025-00201-y Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). “Estimating evaluating counterfactual prediction models.” Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287 Dahabreh, . J., Robertson, S. E., Tchetgen, E. J., Stuart, E. ., & Hernán, M. . (2019). “Generalizing causal inferences randomized trials: counterfactual graphical identification.” Biometrics, 75(2), 685-694.","code":""},{"path":"https://boyercb.github.io/cfperformance/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Christopher Boyer. Author, maintainer. Issa Dahabreh. Author. Jon Steingrimsson. Author.","code":""},{"path":"https://boyercb.github.io/cfperformance/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). Estimating evaluating counterfactual prediction models. Statistics Medicine, 44(23-24), e70287. DOI: 10.1002/sim.70287","code":"@Article{,   title = {Estimating and Evaluating Counterfactual Prediction Models},   author = {Christopher B. Boyer and Issa J. Dahabreh and Jon A. Steingrimsson},   journal = {Statistics in Medicine},   year = {2025},   volume = {44},   number = {23-24},   pages = {e70287},   doi = {10.1002/sim.70287}, }"},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"cfperformance","text":"cfperformance provides methods estimating model performance measures (MSE, AUC, calibration) hypothetical/counterfactual interventions. methods essential : prediction model deployed settings treatment policies differ training setting Predictions meant support decisions treatment initiation need valid performance estimates even prediction model misspecified Based Boyer, Dahabreh & Steingrimsson (2025). “Estimating evaluating counterfactual prediction models.” Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"cfperformance","text":"","code":"# Install development version from GitHub # install.packages(\"devtools\") devtools::install_github(\"boyercb/cfperformance\")"},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick Start","title":"cfperformance","text":"","code":"library(cfperformance)  # Load example data data(cvd_sim)  # Estimate counterfactual MSE under no treatment result <- cf_mse(   predictions = cvd_sim$risk_score,   outcomes = cvd_sim$event,   treatment = cvd_sim$treatment,   covariates = cvd_sim[, c(\"age\", \"bp\", \"chol\")],   treatment_level = 0,     # Evaluate under no treatment   estimator = \"dr\"         # Doubly robust estimator )  result"},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"key-features","dir":"","previous_headings":"","what":"Key Features","title":"cfperformance","text":"MSE/Brier Score: Loss-based performance counterfactual intervention AUC: Discrimination ability counterfactual intervention Calibration: Reliability risk predictions counterfactual intervention Multiple Estimators: Naive, Conditional Loss/Outcome Model, IPW, Doubly Robust Inference: Bootstrap influence function-based standard errors Cross-validation: Counterfactual-aware model selection cf_cv() cf_compare() Transportability: Evaluate model performance transporting source population (e.g., RCT) target population","code":""},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"transportability-analysis","dir":"","previous_headings":"","what":"Transportability Analysis","title":"cfperformance","text":"package also implements transportability estimators Voter et al. (2025) evaluating prediction model performance transporting source population (typically RCT) target population: See vignette(\"transportability\", package = \"cfperformance\") details.","code":"# Load transportability example data data(transport_sim)  # Estimate transportable MSE in target population tr_mse(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,  # 1=source/RCT, 0=target    covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,   analysis = \"transport\",   estimator = \"dr\" )  # Transportable AUC tr_auc(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,   covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,   analysis = \"transport\",   estimator = \"dr\" )  # Transportable calibration tr_calibration(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,   covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,   analysis = \"transport\",   estimator = \"ipw\" )"},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"cfperformance","text":"","code":"library(cfperformance) data(cvd_sim)  # Compare estimators estimators <- c(\"naive\", \"cl\", \"ipw\", \"dr\") sapply(estimators, function(est) {   cf_mse(     predictions = cvd_sim$risk_score,     outcomes = cvd_sim$event,     treatment = cvd_sim$treatment,     covariates = cvd_sim[, c(\"age\", \"bp\", \"chol\")],     treatment_level = 0,     estimator = est   )$estimate })  # Estimate counterfactual AUC cf_auc(   predictions = cvd_sim$risk_score,   outcomes = cvd_sim$event,   treatment = cvd_sim$treatment,   covariates = cvd_sim[, c(\"age\", \"bp\", \"chol\")],   treatment_level = 0,   estimator = \"dr\" )  # Cross-validation for model selection cf_compare(   models = list(     \"Simple\" = event ~ age,     \"Full\" = event ~ age + bp + chol   ),   data = cvd_sim,   treatment = \"treatment\",   treatment_level = 0,   metric = \"mse\",   K = 5 )"},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"cfperformance","text":"See vignette(\"introduction\", package = \"cfperformance\") comprehensive introduction.","code":""},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"cfperformance","text":"use package research, please cite: Boyer CB, Dahabreh IJ, Steingrimsson JA. Estimating evaluating counterfactual prediction models. Statistics Medicine. 2025; 44(23-24):e70287. doi:[10.1002/sim.70287](https://doi.org/10.1002/sim.70287) transportability methods, also cite: Voter SR, et al. Transportability machine learning-based counterfactual prediction models application CASS. Diagnostic Prognostic Research. 2025; 9(4). doi:[10.1186/s41512-025-00201-y](https://doi.org/10.1186/s41512-025-00201-y)","code":"@article{boyer2025estimating,   title={Estimating and Evaluating Counterfactual Prediction Models},   author={Boyer, Christopher B. and Dahabreh, Issa J. and Steingrimsson, Jon A.},   journal={Statistics in Medicine},   volume={44},   number={23-24},   pages={e70287},   year={2025},   doi={10.1002/sim.70287} }  @article{voter2025transportability,   title={Transportability of machine learning-based counterfactual prediction models with application to CASS},   author={Voter, Sarah R. and others},   journal={Diagnostic and Prognostic Research},   volume={9},   number={4},   year={2025},   doi={10.1186/s41512-025-00201-y} }"},{"path":"https://boyercb.github.io/cfperformance/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"cfperformance","text":"MIT License","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_auc.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Counterfactual Area Under the ROC Curve — cf_auc","title":"Estimate Counterfactual Area Under the ROC Curve — cf_auc","text":"Estimates area receiver operating characteristic curve (AUC) prediction model hypothetical intervention treatment set specific level.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_auc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Counterfactual Area Under the ROC Curve — cf_auc","text":"","code":"cf_auc(   predictions,   outcomes,   treatment,   covariates,   treatment_level = 0,   estimator = c(\"dr\", \"cl\", \"ipw\", \"naive\"),   propensity_model = NULL,   outcome_model = NULL,   se_method = c(\"bootstrap\", \"influence\", \"none\"),   n_boot = 500,   conf_level = 0.95,   parallel = FALSE,   ncores = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_auc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Counterfactual Area Under the ROC Curve — cf_auc","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators (0/1). covariates matrix data frame baseline covariates (confounders). treatment_level counterfactual treatment level (default: 0). estimator Character string specifying estimator: \"naive\": Naive estimator (biased) \"cl\": Conditional loss estimator \"ipw\": Inverse probability weighting estimator \"dr\": Doubly robust estimator (default) propensity_model Optional fitted propensity score model. NULL, logistic regression model fit using covariates. outcome_model Optional fitted outcome model. NULL, logistic regression model fit using covariates among treated/untreated. se_method Method standard error estimation: \"bootstrap\": Bootstrap standard errors (default) \"influence\": Influence function-based standard errors \"none\": standard error estimation n_boot Number bootstrap replications (default: 500). conf_level Confidence level intervals (default: 0.95). parallel Logical indicating whether use parallel processing bootstrap (default: FALSE). ncores Number cores parallel processing (default: NULL, uses available cores minus one). ... Additional arguments passed internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_auc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Counterfactual Area Under the ROC Curve — cf_auc","text":"object class c(\"cf_auc\", \"cf_performance\") containing: estimate Point estimate counterfactual AUC se Standard error (computed) ci_lower Lower confidence interval bound ci_upper Upper confidence interval bound estimator Estimator used naive_estimate Naive AUC comparison n_obs Number observations treatment_level Counterfactual treatment level","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_auc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate Counterfactual Area Under the ROC Curve — cf_auc","text":"counterfactual AUC defined probability randomly selected individual outcome counterfactual intervention higher predicted risk randomly selected individual without outcome. function implements three estimators: Outcome Model (OM/CL) Estimator: Weights concordant pairs predicted probability case/non-case status counterfactual. IPW Estimator: Weights concordant pairs inverse probability treatment. Doubly Robust (DR) Estimator: Combines OM IPW double robustness.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_auc.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate Counterfactual Area Under the ROC Curve — cf_auc","text":"Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287 Li, B., Gatsonis, C., Dahabreh, . J., & Steingrimsson, J. . (2022). \"Estimating area ROC curve transporting prediction model target population.\" Biometrics.","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/cf_auc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate Counterfactual Area Under the ROC Curve — cf_auc","text":"","code":"# Generate example data set.seed(123) n <- 500 x <- rnorm(n) a <- rbinom(n, 1, plogis(-0.5 + 0.5 * x)) y <- rbinom(n, 1, plogis(-1 + x - 0.5 * a)) pred <- plogis(-1 + 0.8 * x)  # Estimate counterfactual AUC under no treatment result <- cf_auc(   predictions = pred,   outcomes = y,   treatment = a,   covariates = data.frame(x = x),   treatment_level = 0,   estimator = \"dr\",   se_method = \"none\" ) print(result) #>  #> Counterfactual AUC Estimation #> ----------------------------------------  #> Estimator: dr  #> Treatment level: 0  #> N observations: 500  #>  #> Estimate: 0.7331 #>  #> Naive estimate: 0.7291  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_calibration.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Counterfactual Calibration Curve — cf_calibration","title":"Estimate Counterfactual Calibration Curve — cf_calibration","text":"Estimates calibration curve prediction model hypothetical intervention treatment set specific level.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_calibration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Counterfactual Calibration Curve — cf_calibration","text":"","code":"cf_calibration(   predictions,   outcomes,   treatment,   covariates,   treatment_level = 0,   estimator = c(\"ipw\", \"cl\"),   propensity_model = NULL,   outcome_model = NULL,   smoother = c(\"loess\", \"binned\"),   n_bins = 10,   span = 0.75,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_calibration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Counterfactual Calibration Curve — cf_calibration","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators (0/1). covariates matrix data frame baseline covariates (confounders). treatment_level counterfactual treatment level (default: 0). estimator Character string specifying estimator: \"naive\": Naive estimator (biased) \"cl\": Conditional loss estimator \"ipw\": Inverse probability weighting estimator \"dr\": Doubly robust estimator (default) propensity_model Optional fitted propensity score model. NULL, logistic regression model fit using covariates. outcome_model Optional fitted outcome model. NULL, logistic regression model fit using covariates among treated/untreated. smoother Smoothing method calibration curve: \"loess\": Local polynomial regression (default) \"binned\": Binned calibration n_bins Number bins binned calibration (default: 10). span Span parameter LOESS smoothing (default: 0.75). ... Additional arguments passed internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_calibration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Counterfactual Calibration Curve — cf_calibration","text":"object class c(\"cf_calibration\", \"cf_performance\") containing: predicted Vector predicted probabilities observed Vector smoothed observed probabilities smoother Smoothing method used ici Integrated calibration index e50 Median absolute calibration error e90 90th percentile absolute calibration error emax Maximum absolute calibration error","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_calibration.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate Counterfactual Calibration Curve — cf_calibration","text":"counterfactual calibration curve estimates relationship predicted risk observed risk counterfactual intervention. done applying inverse probability weights calibration curve estimation.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_calibration.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate Counterfactual Calibration Curve — cf_calibration","text":"Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/cf_calibration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate Counterfactual Calibration Curve — cf_calibration","text":"","code":"# Generate example data set.seed(123) n <- 500 x <- rnorm(n) a <- rbinom(n, 1, plogis(-0.5 + 0.5 * x)) y <- rbinom(n, 1, plogis(-1 + x - 0.5 * a)) pred <- plogis(-1 + 0.8 * x)  # Estimate counterfactual calibration curve result <- cf_calibration(   predictions = pred,   outcomes = y,   treatment = a,   covariates = data.frame(x = x),   treatment_level = 0 ) print(result) #>  #> Counterfactual CALIBRATION Estimation #> ----------------------------------------  #> Estimator: ipw  #> Treatment level: 0  #> N observations: 306  #>  #> Calibration Metrics: #>   ICI (Integrated Calibration Index): 0.0344  #>   E50 (Median absolute error): 0.0185  #>   E90 (90th percentile error): 0.0721  #>   Emax (Maximum error): 0.3588  #>  # plot(result)  # If ggplot2 is available"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_compare.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare Multiple Prediction Models — cf_compare","title":"Compare Multiple Prediction Models — cf_compare","text":"Compares counterfactual performance multiple prediction models using cross-validation held-test set.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_compare.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare Multiple Prediction Models — cf_compare","text":"","code":"cf_compare(   models,   data,   treatment,   treatment_level = 0,   nuisance_covariates = NULL,   metric = c(\"mse\", \"auc\", \"both\"),   estimator = c(\"dr\", \"cl\", \"ipw\", \"naive\"),   method = c(\"cv\", \"holdout\"),   K = 5,   test_prop = 0.2,   seed = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_compare.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare Multiple Prediction Models — cf_compare","text":"models named list model formulas fitted model objects. data data frame containing variables. treatment Character string naming treatment variable. treatment_level counterfactual treatment level (default: 0). nuisance_covariates Character vector covariate names nuisance models. NULL, inferred model formulas. metric Character string specifying performance metric. estimator Character string specifying estimator. method Comparison method: \"cv\" cross-validation (default), \"holdout\" train/test split. K Number folds CV (default: 5). test_prop Proportion data test set method = \"holdout\". seed Random seed reproducibility. ... Additional arguments passed cf_cv internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_compare.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare Multiple Prediction Models — cf_compare","text":"object class cf_compare containing: results Data frame model performance comparisons best_model Name best performing model metric Performance metric used method Comparison method used","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_compare.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare Multiple Prediction Models — cf_compare","text":"","code":"# Generate example data set.seed(123) n <- 300 data <- data.frame(   x1 = rnorm(n),   x2 = rnorm(n),   x3 = rnorm(n) ) data$a <- rbinom(n, 1, plogis(-0.5 + 0.5 * data$x1)) data$y <- rbinom(n, 1, plogis(-1 + data$x1 + 0.5 * data$x2 - 0.3 * data$a))  # Compare models models <- list(   \"Simple\" = y ~ x1,   \"Full\" = y ~ x1 + x2 + x3 )  comparison <- cf_compare(   models = models,   data = data,   treatment = \"a\",   metric = \"mse\",   K = 3 ) print(comparison) #>  #> Counterfactual Model Comparison #> ---------------------------------------------  #> Method: cv (K = 3 ) #> Estimator: dr  #>  #>   model mse_mean mse_se mse_naive_mean #>  Simple   0.1737 0.0179      0.1787998 #>    Full   0.1616 0.0028      0.1764572 #>  #> Best model: Full  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_cv.html","id":null,"dir":"Reference","previous_headings":"","what":"Cross-Validation with Counterfactual Performance Metrics — cf_cv","title":"Cross-Validation with Counterfactual Performance Metrics — cf_cv","text":"Performs K-fold cross-validation estimate --sample counterfactual model performance. function trains evaluates prediction models properly accounting treatment effects.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_cv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cross-Validation with Counterfactual Performance Metrics — cf_cv","text":"","code":"cf_cv(   formula,   data,   treatment,   treatment_level = 0,   nuisance_covariates = NULL,   metric = c(\"mse\", \"auc\", \"both\"),   estimator = c(\"dr\", \"cl\", \"ipw\", \"naive\"),   K = 5,   repeats = 1,   stratify = TRUE,   seed = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_cv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cross-Validation with Counterfactual Performance Metrics — cf_cv","text":"formula formula specifying prediction model (e.g., Y ~ X1 + X2). data data frame containing variables formula plus treatment additional covariates nuisance models. treatment Character string naming treatment variable data. treatment_level counterfactual treatment level (default: 0). nuisance_covariates Character vector covariate names nuisance models. NULL, uses predictors formula. metric Character string specifying performance metric: \"mse\" (default), \"auc\", \"\". estimator Character string specifying estimator: \"dr\" (default), \"cl\", \"ipw\", \"naive\". K Number folds (default: 5). repeats Number times repeat K-fold CV (default: 1). stratify Logical indicating whether stratify folds outcome (default: TRUE binary outcomes). seed Random seed reproducibility (default: NULL). ... Additional arguments passed internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_cv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cross-Validation with Counterfactual Performance Metrics — cf_cv","text":"object class cf_cv containing: results Data frame fold-level performance estimates summary Summary statistics across folds metric Performance metric used estimator Estimator used K Number folds repeats Number repeats call matched call","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_cv.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Cross-Validation with Counterfactual Performance Metrics — cf_cv","text":"Cross-validation counterfactual prediction models requires special care: Nuisance model estimation: Propensity outcome models re-fit training fold avoid overfitting. Sample splitting: prediction model trained training fold evaluated test fold using counterfactual estimators. Stratification: binary outcomes, stratified sampling ensures fold similar outcome prevalence.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_cv.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Cross-Validation with Counterfactual Performance Metrics — cf_cv","text":"Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/cf_cv.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Cross-Validation with Counterfactual Performance Metrics — cf_cv","text":"","code":"# Generate example data set.seed(123) n <- 300 data <- data.frame(   x1 = rnorm(n),   x2 = rnorm(n) ) data$a <- rbinom(n, 1, plogis(-0.5 + 0.5 * data$x1)) data$y <- rbinom(n, 1, plogis(-1 + data$x1 + 0.5 * data$x2 - 0.3 * data$a))  # 5-fold cross-validation cv_result <- cf_cv(   formula = y ~ x1 + x2,   data = data,   treatment = \"a\",   treatment_level = 0,   metric = \"mse\",   K = 5 ) print(cv_result) #>  #> Counterfactual Cross-Validation Results #> ---------------------------------------------  #> Folds: 5 #> Estimator: dr  #> Treatment level: 0  #>  #> MSE: #>   Counterfactual: 0.1568 (SE: 0.0117 ) #>   Naive:          0.1668  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_mse.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Counterfactual Mean Squared Error — cf_mse","title":"Estimate Counterfactual Mean Squared Error — cf_mse","text":"Estimates mean squared error (MSE) prediction model hypothetical intervention treatment set specific level.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_mse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Counterfactual Mean Squared Error — cf_mse","text":"","code":"cf_mse(   predictions,   outcomes,   treatment,   covariates,   treatment_level = 0,   estimator = c(\"dr\", \"cl\", \"ipw\", \"naive\"),   propensity_model = NULL,   outcome_model = NULL,   se_method = c(\"bootstrap\", \"influence\", \"none\"),   n_boot = 500,   conf_level = 0.95,   cross_fit = FALSE,   n_folds = 5,   parallel = FALSE,   ncores = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/cf_mse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Counterfactual Mean Squared Error — cf_mse","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators (0/1). covariates matrix data frame baseline covariates (confounders). treatment_level counterfactual treatment level (default: 0). estimator Character string specifying estimator: \"naive\": Naive estimator (biased) \"cl\": Conditional loss estimator \"ipw\": Inverse probability weighting estimator \"dr\": Doubly robust estimator (default) propensity_model Optional fitted propensity score model. NULL, logistic regression model fit using covariates. outcome_model Optional fitted outcome model. NULL, logistic regression model fit using covariates among treated/untreated. se_method Method standard error estimation: \"bootstrap\": Bootstrap standard errors (default) \"influence\": Influence function-based standard errors \"none\": standard error estimation n_boot Number bootstrap replications (default: 500). conf_level Confidence level intervals (default: 0.95). cross_fit Logical indicating whether use cross-fitting nuisance model estimation (default: FALSE). Cross-fitting enables valid inference using flexible machine learning estimators. n_folds Number folds cross-fitting (default: 5). parallel Logical indicating whether use parallel processing bootstrap (default: FALSE). ncores Number cores parallel processing (default: NULL, uses available cores minus one). ... Additional arguments passed internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_mse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Counterfactual Mean Squared Error — cf_mse","text":"object class c(\"cf_mse\", \"cf_performance\") containing: estimate Point estimate counterfactual MSE se Standard error (computed) ci_lower Lower confidence interval bound ci_upper Upper confidence interval bound estimator Estimator used naive_estimate Naive MSE comparison n_obs Number observations treatment_level Counterfactual treatment level","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_mse.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate Counterfactual Mean Squared Error — cf_mse","text":"function implements four estimators counterfactual MSE: Naive Estimator: Simply computes empirical MSE using observed outcomes. biased counterfactual estimand treatment affects outcomes. Conditional Loss (CL) Estimator: Models expected loss conditional covariates treatment, marginalizes. Requires correctly specified outcome model. IPW Estimator: Weights observations inverse probability receiving counterfactual treatment. Requires correctly specified propensity score model. Doubly Robust (DR) Estimator: Combines CL IPW approaches. Consistent either propensity outcome model correctly specified.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cf_mse.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate Counterfactual Mean Squared Error — cf_mse","text":"Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/cf_mse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate Counterfactual Mean Squared Error — cf_mse","text":"","code":"# Generate example data set.seed(123) n <- 500 x <- rnorm(n) a <- rbinom(n, 1, plogis(-0.5 + 0.5 * x)) y <- rbinom(n, 1, plogis(-1 + x - 0.5 * a)) pred <- plogis(-1 + 0.8 * x)  # Predictions from some model  # Estimate counterfactual MSE under no treatment result <- cf_mse(   predictions = pred,   outcomes = y,   treatment = a,   covariates = data.frame(x = x),   treatment_level = 0,   estimator = \"dr\",   se_method = \"none\"  # Skip SE for speed in example ) print(result) #>  #> Counterfactual MSE Estimation #> ----------------------------------------  #> Estimator: dr  #> Treatment level: 0  #> N observations: 500  #>  #> Estimate: 0.1754 #>  #> Naive estimate: 0.1689  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/cfperformance-package.html","id":null,"dir":"Reference","previous_headings":"","what":"cfperformance: Counterfactual Prediction Model Performance Estimation — cfperformance-package","title":"cfperformance: Counterfactual Prediction Model Performance Estimation — cfperformance-package","text":"Provides methods estimating model performance measures (mean squared error, area ROC curve, calibration) hypothetical/counterfactual interventions. Implements conditional loss, inverse probability weighting, doubly robust estimators Boyer, Dahabreh & Steingrimsson (2025) doi:10.1002/sim.70287 . methods essential prediction models deployed settings treatment policies differ training, predictions support treatment decisions. Provides methods estimating model performance measures (MSE, AUC, calibration) hypothetical/counterfactual interventions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cfperformance-package.html","id":"main-functions","dir":"Reference","previous_headings":"","what":"Main Functions","title":"cfperformance: Counterfactual Prediction Model Performance Estimation — cfperformance-package","text":"cf_mse: Estimate counterfactual mean squared error cf_auc: Estimate counterfactual AUC cf_calibration: Estimate counterfactual calibration curve fit_nuisance: Fit nuisance models estimation","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cfperformance-package.html","id":"estimators","dir":"Reference","previous_headings":"","what":"Estimators","title":"cfperformance: Counterfactual Prediction Model Performance Estimation — cfperformance-package","text":"Three main estimators implemented: Conditional Loss (CL): Relies correct specification outcome model \\(h_a(X) = E[L(Y, \\mu(X^*)) | X, =]\\) Inverse Probability Weighting (IPW): Relies correct specification propensity score \\(e_a(X) = Pr[=| X]\\) Doubly Robust (DR): Consistent either outcome model propensity score correctly specified","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cfperformance-package.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"cfperformance: Counterfactual Prediction Model Performance Estimation — cfperformance-package","text":"Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine. doi:10.1002/sim.70287","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/cfperformance-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"cfperformance: Counterfactual Prediction Model Performance Estimation — cfperformance-package","text":"Maintainer: Christopher Boyer cboyer@hsph.harvard.edu (ORCID) Authors: Issa Dahabreh (ORCID) Jon Steingrimsson (ORCID)","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/coef.cf_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Coefficient Method for cf_performance Objects — coef.cf_performance","title":"Coefficient Method for cf_performance Objects — coef.cf_performance","text":"Coefficient Method cf_performance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/coef.cf_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coefficient Method for cf_performance Objects — coef.cf_performance","text":"","code":"# S3 method for class 'cf_performance' coef(object, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/coef.cf_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coefficient Method for cf_performance Objects — coef.cf_performance","text":"object cf_performance object. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/coef.cf_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coefficient Method for cf_performance Objects — coef.cf_performance","text":"point estimate.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/coef.tr_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Coefficient Method for tr_performance Objects — coef.tr_performance","title":"Coefficient Method for tr_performance Objects — coef.tr_performance","text":"Coefficient Method tr_performance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/coef.tr_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coefficient Method for tr_performance Objects — coef.tr_performance","text":"","code":"# S3 method for class 'tr_performance' coef(object, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/coef.tr_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coefficient Method for tr_performance Objects — coef.tr_performance","text":"object tr_performance object. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/coef.tr_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coefficient Method for tr_performance Objects — coef.tr_performance","text":"point estimate.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/confint.cf_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Confidence Interval Method for cf_performance Objects — confint.cf_performance","title":"Confidence Interval Method for cf_performance Objects — confint.cf_performance","text":"Confidence Interval Method cf_performance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/confint.cf_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Confidence Interval Method for cf_performance Objects — confint.cf_performance","text":"","code":"# S3 method for class 'cf_performance' confint(object, parm = NULL, level = NULL, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/confint.cf_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Confidence Interval Method for cf_performance Objects — confint.cf_performance","text":"object cf_performance object. parm Parameter (ignored, one parameter). level Confidence level (default uses object's conf_level). ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/confint.cf_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Confidence Interval Method for cf_performance Objects — confint.cf_performance","text":"matrix confidence interval bounds.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/confint.tr_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Confidence Interval Method for tr_performance Objects — confint.tr_performance","title":"Confidence Interval Method for tr_performance Objects — confint.tr_performance","text":"Confidence Interval Method tr_performance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/confint.tr_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Confidence Interval Method for tr_performance Objects — confint.tr_performance","text":"","code":"# S3 method for class 'tr_performance' confint(object, parm = NULL, level = NULL, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/confint.tr_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Confidence Interval Method for tr_performance Objects — confint.tr_performance","text":"object tr_performance object. parm Parameter (ignored, one parameter). level Confidence level (default uses object's conf_level). ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/confint.tr_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Confidence Interval Method for tr_performance Objects — confint.tr_performance","text":"matrix confidence interval bounds.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cvd_sim.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated Cardiovascular Disease Data — cvd_sim","title":"Simulated Cardiovascular Disease Data — cvd_sim","text":"simulated dataset demonstrating counterfactual prediction model performance estimation. data mimics scenario patients receive cardiovascular treatment based risk factors, want evaluate well prediction model perform different treatment policies.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cvd_sim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulated Cardiovascular Disease Data — cvd_sim","text":"","code":"cvd_sim"},{"path":"https://boyercb.github.io/cfperformance/reference/cvd_sim.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated Cardiovascular Disease Data — cvd_sim","text":"data frame 1000 rows 6 variables: age Standardized age (mean 0, SD 1) bp Standardized blood pressure (mean 0, SD 1) chol Standardized cholesterol level (mean 0, SD 1) treatment Binary treatment indicator (1 = treated, 0 = untreated). Treatment assignment confounded age blood pressure. event Binary outcome indicating cardiovascular event (1 = event, 0 = event). Risk depends age, bp, chol, reduced treatment. risk_score Predicted probability event logistic regression model fit observed data using age, bp, chol predictors.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cvd_sim.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Simulated Cardiovascular Disease Data — cvd_sim","text":"Simulated data based framework Boyer, Dahabreh & Steingrimsson (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cvd_sim.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simulated Cardiovascular Disease Data — cvd_sim","text":"data generating process : Covariates independent standard normal Treatment probability: plogis(-0.3 + 0.4*age + 0.3*bp + 0.1*chol) Outcome probability: plogis(-2 + 0.6*age + 0.5*bp + 0.3*chol - 0.4*treatment) creates confounding sicker patients (higher age, bp) likely receive treatment, treatment also affects outcomes.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/cvd_sim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulated Cardiovascular Disease Data — cvd_sim","text":"","code":"data(cvd_sim) head(cvd_sim) #>          age          bp        chol treatment event risk_score #> 1 -0.2078913  0.92673619  0.51441033         1     0 0.16456973 #> 2 -1.2517361 -0.07559820  1.85761302         1     0 0.06879905 #> 3  1.7957878  0.16615295 -1.09269567         0     0 0.23461394 #> 4 -1.2464064 -1.40349275  1.05642052         0     0 0.02765908 #> 5 -0.5880067 -0.08772247  1.18161254         1     0 0.08778086 #> 6 -0.9132198  0.16445812 -0.03630469         1     0 0.06799805  # Estimate counterfactual MSE under no treatment result <- cf_mse(   predictions = cvd_sim$risk_score,   outcomes = cvd_sim$event,   treatment = cvd_sim$treatment,   covariates = cvd_sim[, c(\"age\", \"bp\", \"chol\")],   treatment_level = 0,   estimator = \"dr\" ) result #>  #> Counterfactual MSE Estimation #> ----------------------------------------  #> Estimator: dr  #> Treatment level: 0  #> N observations: 1000  #>  #> Estimate: 0.1061 (SE: 0.0096 ) #> 95% CI: [0.0877, 0.125] #>  #> Naive estimate: 0.1061  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-bootstrap_auc.html","id":null,"dir":"Reference","previous_headings":"","what":"Bootstrap Standard Errors for AUC — .bootstrap_auc","title":"Bootstrap Standard Errors for AUC — .bootstrap_auc","text":"Computes bootstrap standard errors confidence intervals counterfactual AUC estimators.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-bootstrap_auc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bootstrap Standard Errors for AUC — .bootstrap_auc","text":"","code":".bootstrap_auc(   predictions,   outcomes,   treatment,   covariates,   treatment_level,   estimator,   n_boot = 500,   conf_level = 0.95,   parallel = FALSE,   ncores = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-bootstrap_auc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bootstrap Standard Errors for AUC — .bootstrap_auc","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators. covariates Matrix data frame covariates. treatment_level Counterfactual treatment level. estimator Character string specifying estimator type. n_boot Number bootstrap replications. conf_level Confidence level. parallel Logical indicating whether use parallel processing. ncores Number cores parallel processing. ... Additional arguments.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-bootstrap_auc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bootstrap Standard Errors for AUC — .bootstrap_auc","text":"List containing bootstrap results.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-bootstrap_mse.html","id":null,"dir":"Reference","previous_headings":"","what":"Bootstrap Standard Errors for MSE — .bootstrap_mse","title":"Bootstrap Standard Errors for MSE — .bootstrap_mse","text":"Computes bootstrap standard errors confidence intervals counterfactual MSE estimators.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-bootstrap_mse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bootstrap Standard Errors for MSE — .bootstrap_mse","text":"","code":".bootstrap_mse(   predictions,   outcomes,   treatment,   covariates,   treatment_level,   estimator,   n_boot = 500,   conf_level = 0.95,   parallel = FALSE,   ncores = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-bootstrap_mse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bootstrap Standard Errors for MSE — .bootstrap_mse","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators. covariates Matrix data frame covariates. treatment_level Counterfactual treatment level. estimator Character string specifying estimator type. n_boot Number bootstrap replications. conf_level Confidence level. parallel Logical indicating whether use parallel processing. ncores Number cores parallel processing. ... Additional arguments.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-bootstrap_mse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bootstrap Standard Errors for MSE — .bootstrap_mse","text":"List containing: se Bootstrap standard error ci_lower Lower confidence interval bound ci_upper Upper confidence interval bound boot_estimates Vector bootstrap estimates","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-compute_mse_crossfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute DR MSE with Cross-Fitting — .compute_mse_crossfit","title":"Compute DR MSE with Cross-Fitting — .compute_mse_crossfit","text":"Computes doubly robust MSE estimator using cross-fitted nuisance functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-compute_mse_crossfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute DR MSE with Cross-Fitting — .compute_mse_crossfit","text":"","code":".compute_mse_crossfit(   predictions,   outcomes,   treatment,   covariates,   treatment_level,   K = 5,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-compute_mse_crossfit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute DR MSE with Cross-Fitting — .compute_mse_crossfit","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators (0/1). covariates matrix data frame baseline covariates (confounders). treatment_level counterfactual treatment level (default: 0). K Number folds cross-fitting. ... Additional arguments passed internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-compute_mse_crossfit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute DR MSE with Cross-Fitting — .compute_mse_crossfit","text":"Doubly robust MSE estimate cross-fitting.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-cross_fit_nuisance.html","id":null,"dir":"Reference","previous_headings":"","what":"Cross-Fitting for Nuisance Model Estimation — .cross_fit_nuisance","title":"Cross-Fitting for Nuisance Model Estimation — .cross_fit_nuisance","text":"Implements K-fold cross-fitting nuisance model estimation enable valid inference flexible machine learning estimators.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-cross_fit_nuisance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cross-Fitting for Nuisance Model Estimation — .cross_fit_nuisance","text":"","code":".cross_fit_nuisance(   treatment,   outcomes,   covariates,   treatment_level,   predictions,   K = 5,   propensity_formula = NULL,   outcome_formula = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-cross_fit_nuisance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cross-Fitting for Nuisance Model Estimation — .cross_fit_nuisance","text":"treatment Numeric vector treatment indicators. outcomes Numeric vector observed outcomes. covariates Matrix data frame covariates. treatment_level Counterfactual treatment level. predictions Numeric vector model predictions. K Number folds cross-fitting (default: 5). propensity_formula Formula propensity model (optional). outcome_formula Formula outcome model (optional). ... Additional arguments passed model fitting functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-cross_fit_nuisance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cross-Fitting for Nuisance Model Estimation — .cross_fit_nuisance","text":"List containing: ps Cross-fitted propensity scores h Cross-fitted conditional loss predictions folds Fold assignments","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-cross_fit_nuisance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Cross-Fitting for Nuisance Model Estimation — .cross_fit_nuisance","text":"Cross-fitting (sample splitting) allows use flexible machine learning methods nuisance function estimation maintaining valid inference. observation's nuisance function predictions made using models trained data excluding observation's fold.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-cross_fit_nuisance.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Cross-Fitting for Nuisance Model Estimation — .cross_fit_nuisance","text":"Chernozhukov, V., Chetverikov, D., Demirer, M., et al. (2018). \"Double/debiased machine learning treatment structural parameters.\" Econometrics Journal, 21(1), C1-C68.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-delong_se.html","id":null,"dir":"Reference","previous_headings":"","what":"DeLong's Method for AUC Standard Error — .delong_se","title":"DeLong's Method for AUC Standard Error — .delong_se","text":"Computes standard error empirical AUC using DeLong's method.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-delong_se.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"DeLong's Method for AUC Standard Error — .delong_se","text":"","code":".delong_se(predictions, outcomes)"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-delong_se.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"DeLong's Method for AUC Standard Error — .delong_se","text":"predictions Numeric vector predictions. outcomes Binary outcome vector.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-delong_se.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"DeLong's Method for AUC Standard Error — .delong_se","text":"Standard error AUC.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-delong_se.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"DeLong's Method for AUC Standard Error — .delong_se","text":"DeLong, E. R., DeLong, D. M., & Clarke-Pearson, D. L. (1988). \"Comparing areas two correlated receiver operating characteristic curves: nonparametric approach.\" Biometrics, 44(3), 837-845.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_auc.html","id":null,"dir":"Reference","previous_headings":"","what":"Influence Function-Based Standard Errors for AUC — .influence_se_auc","title":"Influence Function-Based Standard Errors for AUC — .influence_se_auc","text":"Computes standard errors counterfactual AUC using influence functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_auc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Influence Function-Based Standard Errors for AUC — .influence_se_auc","text":"","code":".influence_se_auc(   predictions,   outcomes,   treatment,   covariates,   treatment_level,   estimator,   propensity_model,   outcome_model )"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_auc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Influence Function-Based Standard Errors for AUC — .influence_se_auc","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators. covariates Matrix data frame covariates. treatment_level Counterfactual treatment level. estimator Character string specifying estimator type. propensity_model Fitted propensity model. outcome_model Fitted outcome model.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_auc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Influence Function-Based Standard Errors for AUC — .influence_se_auc","text":"Standard error estimate.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_auc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Influence Function-Based Standard Errors for AUC — .influence_se_auc","text":"influence function AUC based U-statistic representation concordance probability. See Li et al. (2024) details influence function-based variance estimator counterfactual AUC.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_auc.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Influence Function-Based Standard Errors for AUC — .influence_se_auc","text":"Li, B., Steingrimsson, J. ., & Dahabreh, . J. (2024). \"Efficient inference counterfactual area ROC curve.\"","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_mse.html","id":null,"dir":"Reference","previous_headings":"","what":"Influence Function-Based Standard Errors for MSE — .influence_se_mse","title":"Influence Function-Based Standard Errors for MSE — .influence_se_mse","text":"Computes standard errors using efficient influence function doubly robust MSE estimator.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_mse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Influence Function-Based Standard Errors for MSE — .influence_se_mse","text":"","code":".influence_se_mse(   predictions,   outcomes,   treatment,   covariates,   treatment_level,   estimator,   propensity_model,   outcome_model )"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_mse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Influence Function-Based Standard Errors for MSE — .influence_se_mse","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators. covariates Matrix data frame covariates. treatment_level Counterfactual treatment level. estimator Character string specifying estimator type. propensity_model Fitted propensity model. outcome_model Fitted outcome model.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_mse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Influence Function-Based Standard Errors for MSE — .influence_se_mse","text":"Standard error estimate.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_mse.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Influence Function-Based Standard Errors for MSE — .influence_se_mse","text":"efficient influence function MSE treatment level \\(\\) : $$\\chi(O) = \\frac{(=)}{e_a(X)}[L(Y, \\mu(X^*)) - h_a(X)] + h_a(X) - \\psi()$$ \\(e_a(X) = P(=|X)\\) propensity score, \\(h_a(X) = E[L|X,=]\\) conditional loss, \\(\\psi()\\) target estimand.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-influence_se_mse.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Influence Function-Based Standard Errors for MSE — .influence_se_mse","text":"Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-stratified_folds.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Stratified Folds — .stratified_folds","title":"Create Stratified Folds — .stratified_folds","text":"Create Stratified Folds","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-stratified_folds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Stratified Folds — .stratified_folds","text":"","code":".stratified_folds(y, K)"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-stratified_folds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Stratified Folds — .stratified_folds","text":"y Binary outcome vector K Number folds","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-stratified_folds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Stratified Folds — .stratified_folds","text":"Vector fold assignments","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-summarize_cv_results.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize CV Results — .summarize_cv_results","title":"Summarize CV Results — .summarize_cv_results","text":"Summarize CV Results","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-summarize_cv_results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize CV Results — .summarize_cv_results","text":"","code":".summarize_cv_results(results_df, metric)"},{"path":"https://boyercb.github.io/cfperformance/reference/dot-summarize_cv_results.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize CV Results — .summarize_cv_results","text":"results_df Data frame fold-level results metric Performance metric","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/dot-summarize_cv_results.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize CV Results — .summarize_cv_results","text":"Data frame summary statistics","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/fit_nuisance.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit Nuisance Models for Counterfactual Performance Estimation — fit_nuisance","title":"Fit Nuisance Models for Counterfactual Performance Estimation — fit_nuisance","text":"Fits propensity score outcome models use counterfactual performance estimation.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/fit_nuisance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit Nuisance Models for Counterfactual Performance Estimation — fit_nuisance","text":"","code":"fit_nuisance(   propensity_formula,   outcome_formula,   data,   treatment_level = 0,   propensity_method = c(\"glm\", \"gam\"),   outcome_method = c(\"glm\", \"gam\"),   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/fit_nuisance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit Nuisance Models for Counterfactual Performance Estimation — fit_nuisance","text":"propensity_formula Formula propensity score model. outcome_formula Formula outcome model. data Data frame containing variables. treatment_level counterfactual treatment level (default: 0). propensity_method Method propensity score estimation: \"glm\": Logistic regression (default) \"gam\": Generalized additive model (requires mgcv) outcome_method Method outcome model estimation: \"glm\": Logistic regression (default) \"gam\": Generalized additive model (requires mgcv) ... Additional arguments passed model fitting functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/fit_nuisance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit Nuisance Models for Counterfactual Performance Estimation — fit_nuisance","text":"object class cf_nuisance containing: propensity Fitted propensity score model outcome Fitted outcome model treatment_level Counterfactual treatment level","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/fit_nuisance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit Nuisance Models for Counterfactual Performance Estimation — fit_nuisance","text":"function provides convenient way fit nuisance models can passed cf_mse(), cf_auc(), cf_calibration(). outcome model, observations counterfactual treatment level used fitting, required conditional loss estimator.","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/fit_nuisance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit Nuisance Models for Counterfactual Performance Estimation — fit_nuisance","text":"","code":"# Generate example data set.seed(123) n <- 500 df <- data.frame(   x1 = rnorm(n),   x2 = rnorm(n) ) df$a <- rbinom(n, 1, plogis(-0.5 + 0.5 * df$x1)) df$y <- rbinom(n, 1, plogis(-1 + df$x1 + 0.5 * df$x2 - 0.5 * df$a))  # Fit nuisance models nuisance <- fit_nuisance(   propensity_formula = a ~ x1 + x2,   outcome_formula = y ~ x1 + x2,   data = df,   treatment_level = 0 )  print(nuisance) #>  #> Nuisance Models for Counterfactual Performance #> ---------------------------------------------  #> Treatment level: 0  #>  #> Propensity Score Model: #>   Method: glm  #>   Formula: a ~ x1 + x2  #>  #> Outcome Model: #>   Method: glm  #>   Formula: y ~ x1 + x2  #>   Fitted on n = 323 observations with A = 0  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/plot.cf_auc.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Method for cf_auc Objects — plot.cf_auc","title":"Plot Method for cf_auc Objects — plot.cf_auc","text":"Creates ROC curve plot.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/plot.cf_auc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Method for cf_auc Objects — plot.cf_auc","text":"","code":"# S3 method for class 'cf_auc' plot(x, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/plot.cf_auc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Method for cf_auc Objects — plot.cf_auc","text":"x cf_auc object. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/plot.cf_auc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Method for cf_auc Objects — plot.cf_auc","text":"plot object.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/plot.cf_calibration.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Method for cf_calibration Objects — plot.cf_calibration","title":"Plot Method for cf_calibration Objects — plot.cf_calibration","text":"Creates calibration plot showing predicted vs observed probabilities counterfactual intervention.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/plot.cf_calibration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Method for cf_calibration Objects — plot.cf_calibration","text":"","code":"# S3 method for class 'cf_calibration' plot(x, add_histogram = TRUE, add_rug = TRUE, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/plot.cf_calibration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Method for cf_calibration Objects — plot.cf_calibration","text":"x cf_calibration object. add_histogram Logical; add histogram predictions (default: TRUE). add_rug Logical; add rug plot (default: TRUE). ... Additional arguments passed plotting functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/plot.cf_calibration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Method for cf_calibration Objects — plot.cf_calibration","text":"ggplot object (ggplot2 available) base R plot.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/plot.tr_calibration.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Method for tr_calibration Objects — plot.tr_calibration","title":"Plot Method for tr_calibration Objects — plot.tr_calibration","text":"Creates calibration plot showing predicted vs observed probabilities target population.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/plot.tr_calibration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Method for tr_calibration Objects — plot.tr_calibration","text":"","code":"# S3 method for class 'tr_calibration' plot(x, add_reference = TRUE, show_metrics = TRUE, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/plot.tr_calibration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Method for tr_calibration Objects — plot.tr_calibration","text":"x tr_calibration object. add_reference Logical; add 45-degree reference line (default: TRUE). show_metrics Logical; show calibration metrics plot (default: TRUE). ... Additional arguments passed plotting functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/plot.tr_calibration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Method for tr_calibration Objects — plot.tr_calibration","text":"ggplot object (ggplot2 available) base R plot.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_compare.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for cf_compare Objects — print.cf_compare","title":"Print Method for cf_compare Objects — print.cf_compare","text":"Print Method cf_compare Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_compare.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for cf_compare Objects — print.cf_compare","text":"","code":"# S3 method for class 'cf_compare' print(x, digits = 4, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_compare.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for cf_compare Objects — print.cf_compare","text":"x cf_compare object. digits Number digits print. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_compare.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for cf_compare Objects — print.cf_compare","text":"Invisibly returns input object.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_cv.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for cf_cv Objects — print.cf_cv","title":"Print Method for cf_cv Objects — print.cf_cv","text":"Print Method cf_cv Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_cv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for cf_cv Objects — print.cf_cv","text":"","code":"# S3 method for class 'cf_cv' print(x, digits = 4, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_cv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for cf_cv Objects — print.cf_cv","text":"x cf_cv object. digits Number digits print. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_cv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for cf_cv Objects — print.cf_cv","text":"Invisibly returns input object.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_nuisance.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for cf_nuisance Objects — print.cf_nuisance","title":"Print Method for cf_nuisance Objects — print.cf_nuisance","text":"Print Method cf_nuisance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_nuisance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for cf_nuisance Objects — print.cf_nuisance","text":"","code":"# S3 method for class 'cf_nuisance' print(x, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_nuisance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for cf_nuisance Objects — print.cf_nuisance","text":"x cf_nuisance object. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_nuisance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for cf_nuisance Objects — print.cf_nuisance","text":"Invisibly returns input object.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for cf_performance Objects — print.cf_performance","title":"Print Method for cf_performance Objects — print.cf_performance","text":"Print Method cf_performance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for cf_performance Objects — print.cf_performance","text":"","code":"# S3 method for class 'cf_performance' print(x, digits = 4, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for cf_performance Objects — print.cf_performance","text":"x cf_performance object. digits Number digits print (default: 4). ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.cf_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for cf_performance Objects — print.cf_performance","text":"Invisibly returns input object.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.tr_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for tr_performance Objects — print.tr_performance","title":"Print Method for tr_performance Objects — print.tr_performance","text":"Print Method tr_performance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.tr_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for tr_performance Objects — print.tr_performance","text":"","code":"# S3 method for class 'tr_performance' print(x, digits = 4, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/print.tr_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for tr_performance Objects — print.tr_performance","text":"x tr_performance object. digits Number digits print (default: 4). ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/print.tr_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for tr_performance Objects — print.tr_performance","text":"Invisibly returns input object.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_compare.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary Method for cf_compare Objects — summary.cf_compare","title":"Summary Method for cf_compare Objects — summary.cf_compare","text":"Summary Method cf_compare Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_compare.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary Method for cf_compare Objects — summary.cf_compare","text":"","code":"# S3 method for class 'cf_compare' summary(object, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_compare.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary Method for cf_compare Objects — summary.cf_compare","text":"object cf_compare object. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_compare.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary Method for cf_compare Objects — summary.cf_compare","text":"Invisibly returns results data frame.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_cv.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary Method for cf_cv Objects — summary.cf_cv","title":"Summary Method for cf_cv Objects — summary.cf_cv","text":"Summary Method cf_cv Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_cv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary Method for cf_cv Objects — summary.cf_cv","text":"","code":"# S3 method for class 'cf_cv' summary(object, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_cv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary Method for cf_cv Objects — summary.cf_cv","text":"object cf_cv object. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_cv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary Method for cf_cv Objects — summary.cf_cv","text":"Invisibly returns summary data frame.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary Method for cf_performance Objects — summary.cf_performance","title":"Summary Method for cf_performance Objects — summary.cf_performance","text":"Summary Method cf_performance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary Method for cf_performance Objects — summary.cf_performance","text":"","code":"# S3 method for class 'cf_performance' summary(object, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary Method for cf_performance Objects — summary.cf_performance","text":"object cf_performance object. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.cf_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary Method for cf_performance Objects — summary.cf_performance","text":"summary list key statistics.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.tr_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary Method for tr_performance Objects — summary.tr_performance","title":"Summary Method for tr_performance Objects — summary.tr_performance","text":"Summary Method tr_performance Objects","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.tr_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary Method for tr_performance Objects — summary.tr_performance","text":"","code":"# S3 method for class 'tr_performance' summary(object, ...)"},{"path":"https://boyercb.github.io/cfperformance/reference/summary.tr_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary Method for tr_performance Objects — summary.tr_performance","text":"object tr_performance object. ... Additional arguments (ignored).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/summary.tr_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary Method for tr_performance Objects — summary.tr_performance","text":"summary list key statistics.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_auc.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Transportable Area Under the ROC Curve — tr_auc","title":"Estimate Transportable Area Under the ROC Curve — tr_auc","text":"Estimates area receiver operating characteristic curve (AUC) prediction model target population using data transported source population (typically RCT).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_auc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Transportable Area Under the ROC Curve — tr_auc","text":"","code":"tr_auc(   predictions,   outcomes,   treatment,   source,   covariates,   treatment_level = 0,   analysis = c(\"transport\", \"joint\"),   estimator = c(\"dr\", \"om\", \"ipw\", \"naive\"),   selection_model = NULL,   propensity_model = NULL,   outcome_model = NULL,   se_method = c(\"bootstrap\", \"influence\", \"none\"),   n_boot = 500,   conf_level = 0.95,   stratified_boot = TRUE,   cross_fit = FALSE,   n_folds = 5,   parallel = FALSE,   ncores = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/tr_auc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Transportable Area Under the ROC Curve — tr_auc","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators (0/1). source Numeric vector population indicators (1=source/RCT, 0=target). covariates matrix data frame baseline covariates. treatment_level treatment level interest (default: 0). analysis Character string specifying type analysis: \"transport\": Use source outcomes target estimation (default) \"joint\": Pool source target data estimator Character string specifying estimator: \"naive\": Naive estimator (biased) \"om\": Outcome model estimator \"ipw\": Inverse probability weighting estimator \"dr\": Doubly robust estimator (default) selection_model Optional fitted selection model P(S=0|X). NULL, logistic regression model fit using covariates. propensity_model Optional fitted propensity score model P(=1|X,S=1). NULL, logistic regression model fit using source data. outcome_model Optional fitted outcome model E[L(Y,g)|X,,S]. NULL, regression model fit using relevant data. se_method Method standard error estimation: \"bootstrap\": Bootstrap standard errors (default) \"influence\": Influence function-based standard errors \"none\": standard error estimation n_boot Number bootstrap replications (default: 500). conf_level Confidence level intervals (default: 0.95). stratified_boot Logical indicating whether use stratified bootstrap preserves source/target ratio (default: TRUE). Recommended transportability analysis. cross_fit Logical indicating whether use cross-fitting nuisance model estimation (default: FALSE). n_folds Number folds cross-fitting (default: 5). parallel Logical indicating whether use parallel processing bootstrap (default: FALSE). ncores Number cores parallel processing (default: NULL, uses available cores minus one). ... Additional arguments passed internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_auc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Transportable Area Under the ROC Curve — tr_auc","text":"object class c(\"tr_auc\", \"tr_performance\") containing: estimate Point estimate transportable AUC se Standard error (computed) ci_lower Lower confidence interval bound ci_upper Upper confidence interval bound estimator Estimator used analysis Analysis type naive_estimate Naive AUC comparison n_target Number target observations n_source Number source observations treatment_level Treatment level","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_auc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate Transportable Area Under the ROC Curve — tr_auc","text":"function implements estimators transporting prediction model AUC source population (typically RCT) target population. AUC defined probability randomly selected case higher predicted risk randomly selected non-case. Transportability Analysis: Uses outcome data source/RCT population estimate AUC target population. Requires: Selection model: P(S=0|X) Propensity model source: P(=1|X, S=1) Outcome model trained source data: E[Y|X, , S=1] Joint Analysis: Pools source target data estimate AUC target population. efficient populations outcome data. observational analysis (single population), use cf_auc() instead. estimators use U-statistic formulations weight concordant pairs estimated probabilities occurring target population counterfactual treatment.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_auc.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate Transportable Area Under the ROC Curve — tr_auc","text":"Voter, S. R., et al. (2025). \"Transportability machine learning-based counterfactual prediction models application CASS.\" Diagnostic Prognostic Research, 9(4). doi:10.1186/s41512-025-00201-y Li, B., Gatsonis, C., Dahabreh, . J., & Steingrimsson, J. . (2022). \"Estimating area ROC curve transporting prediction model target population.\" Biometrics. Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/tr_auc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate Transportable Area Under the ROC Curve — tr_auc","text":"","code":"# Generate example data with source (RCT) and target populations set.seed(123) n <- 1000 # Covariates x <- rnorm(n) # Source indicator (S=1 for RCT, S=0 for target) s <- rbinom(n, 1, plogis(0.5 - 0.3 * x)) # Treatment (randomized in source, confounded in target) a <- ifelse(s == 1,             rbinom(n, 1, 0.5),  # Randomized in RCT             rbinom(n, 1, plogis(-0.5 + 0.5 * x)))  # Confounded in target # Outcome (binary) y <- rbinom(n, 1, plogis(-1 + x - 0.5 * a)) # Predictions from some model pred <- plogis(-1 + 0.8 * x)  # Estimate transportable AUC result <- tr_auc(   predictions = pred,   outcomes = y,   treatment = a,   source = s,   covariates = data.frame(x = x),   treatment_level = 0,   analysis = \"transport\",   estimator = \"dr\",   se_method = \"none\"  # Skip SE for speed ) print(result) #>  #> Transportable AUC Estimation #> ---------------------------------------------  #> Analysis: transport  #> Estimator: dr  #> Treatment level: 0  #> N target: 376  | N source: 624  #>  #> Estimate: 0.7051 #>  #> Naive estimate: 0.7386  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/tr_calibration.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Transportable Calibration — tr_calibration","title":"Estimate Transportable Calibration — tr_calibration","text":"Estimates calibration prediction model target population using data transported source population (typically RCT).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_calibration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Transportable Calibration — tr_calibration","text":"","code":"tr_calibration(   predictions,   outcomes,   treatment,   source,   covariates,   treatment_level = 0,   analysis = c(\"transport\", \"joint\"),   estimator = c(\"ipw\", \"om\"),   selection_model = NULL,   propensity_model = NULL,   outcome_model = NULL,   smoother = c(\"loess\", \"binned\"),   n_bins = 10,   span = 0.75,   se_method = c(\"bootstrap\", \"none\"),   n_boot = 500,   conf_level = 0.95,   stratified_boot = TRUE,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/tr_calibration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Transportable Calibration — tr_calibration","text":"predictions Numeric vector model predictions (typically probabilities). outcomes Numeric vector observed outcomes (must binary 0/1). treatment Numeric vector treatment indicators (0/1). source Numeric vector population indicators (1=source/RCT, 0=target). covariates matrix data frame baseline covariates. treatment_level treatment level interest (default: 0). analysis Character string specifying type analysis: \"transport\": Use source outcomes target estimation (default) \"joint\": Pool source target data estimator Character string specifying estimator: \"ipw\": Inverse probability weighting estimator (default) \"om\": Outcome model estimator selection_model Optional fitted selection model P(S=0|X). NULL, logistic regression model fit using covariates. propensity_model Optional fitted propensity score model P(=1|X,S=1). NULL, logistic regression model fit using source data. outcome_model Optional fitted outcome model E[Y|X,,S]. NULL, regression model fit using relevant data. smoother Smoothing method calibration curve: \"loess\": Local polynomial regression (default) \"binned\": Binned calibration n_bins Number bins binned calibration (default: 10). span Span parameter LOESS smoothing (default: 0.75). se_method Method standard error estimation: \"bootstrap\": Bootstrap standard errors (default) \"none\": standard error estimation n_boot Number bootstrap replications (default: 500). conf_level Confidence level intervals (default: 0.95). stratified_boot Logical indicating whether use stratified bootstrap preserves source/target ratio (default: TRUE). ... Additional arguments passed internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_calibration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Transportable Calibration — tr_calibration","text":"object class c(\"tr_calibration\", \"tr_performance\") containing: predicted Vector predicted probabilities observed Vector smoothed observed probabilities smoother Smoothing method used ici Integrated calibration index e50 Median absolute calibration error e90 90th percentile absolute calibration error emax Maximum absolute calibration error se Named list standard errors calibration metrics (computed) ci_lower Named list lower confidence bounds ci_upper Named list upper confidence bounds estimator Estimator used analysis Analysis type n_target Number target observations n_source Number source observations","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_calibration.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate Transportable Calibration — tr_calibration","text":"function implements estimators transporting prediction model calibration source population (typically RCT) target population. Transportability Analysis: Uses outcome data source/RCT population estimate calibration target population. IPW estimator weights source observations represent target population. Joint Analysis: Pools source target data estimate calibration target population. function computes several calibration metrics: ICI (Integrated Calibration Index): Mean absolute difference predicted observed probabilities E50: Median absolute calibration error E90: 90th percentile absolute calibration error Emax: Maximum absolute calibration error observational analysis (single population), use cf_calibration() instead.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_calibration.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate Transportable Calibration — tr_calibration","text":"Voter, S. R., et al. (2025). \"Transportability machine learning-based counterfactual prediction models application CASS.\" Diagnostic Prognostic Research, 9(4). doi:10.1186/s41512-025-00201-y Austin, P. C., & Steyerberg, E. W. (2019). \"Integrated Calibration Index (ICI) related metrics quantifying calibration logistic regression models.\" Statistics Medicine, 38(21), 4051-4065.","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/tr_calibration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate Transportable Calibration — tr_calibration","text":"","code":"# Generate example data with source (RCT) and target populations set.seed(123) n <- 1000 # Covariates x <- rnorm(n) # Source indicator (S=1 for RCT, S=0 for target) s <- rbinom(n, 1, plogis(0.5 - 0.3 * x)) # Treatment (randomized in source, confounded in target) a <- ifelse(s == 1,             rbinom(n, 1, 0.5),  # Randomized in RCT             rbinom(n, 1, plogis(-0.5 + 0.5 * x)))  # Confounded in target # Outcome (binary) y <- rbinom(n, 1, plogis(-1 + x - 0.5 * a)) # Prediction model pred <- plogis(-1 + 0.8 * x)  # Estimate transportable calibration with IPW result <- tr_calibration(   predictions = pred,   outcomes = y,   treatment = a,   source = s,   covariates = data.frame(x = x),   treatment_level = 0,   analysis = \"transport\",   estimator = \"ipw\",   se_method = \"none\"  # Use \"bootstrap\" for SEs ) print(result) #>  #> Transportable CALIBRATION Estimation #> ---------------------------------------------  #> Analysis: transport  #> Estimator: ipw  #> Treatment level: 0  #> N target: 376  | N source: 624  #>  #> Calibration Metrics: #>   ICI (Integrated Calibration Index): 0.0493  #>   E50 (Median absolute error): 0.0551  #>   E90 (90th percentile error): 0.096  #>   Emax (Maximum error): 0.1107  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/tr_mse.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Transportable Mean Squared Error — tr_mse","title":"Estimate Transportable Mean Squared Error — tr_mse","text":"Estimates mean squared error (MSE) prediction model target population using data transported source population (typically RCT).","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_mse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Transportable Mean Squared Error — tr_mse","text":"","code":"tr_mse(   predictions,   outcomes,   treatment,   source,   covariates,   treatment_level = 0,   analysis = c(\"transport\", \"joint\"),   estimator = c(\"dr\", \"om\", \"ipw\", \"naive\"),   selection_model = NULL,   propensity_model = NULL,   outcome_model = NULL,   se_method = c(\"bootstrap\", \"influence\", \"none\"),   n_boot = 500,   conf_level = 0.95,   stratified_boot = TRUE,   cross_fit = FALSE,   n_folds = 5,   parallel = FALSE,   ncores = NULL,   ... )"},{"path":"https://boyercb.github.io/cfperformance/reference/tr_mse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Transportable Mean Squared Error — tr_mse","text":"predictions Numeric vector model predictions. outcomes Numeric vector observed outcomes. treatment Numeric vector treatment indicators (0/1). source Numeric vector population indicators (1=source/RCT, 0=target). covariates matrix data frame baseline covariates. treatment_level treatment level interest (default: 0). analysis Character string specifying type analysis: \"transport\": Use source outcomes target estimation (default) \"joint\": Pool source target data estimator Character string specifying estimator: \"naive\": Naive estimator (biased) \"om\": Outcome model estimator \"ipw\": Inverse probability weighting estimator \"dr\": Doubly robust estimator (default) selection_model Optional fitted selection model P(S=0|X). NULL, logistic regression model fit using covariates. propensity_model Optional fitted propensity score model P(=1|X,S=1). NULL, logistic regression model fit using source data. outcome_model Optional fitted outcome model E[L(Y,g)|X,,S]. NULL, regression model fit using relevant data. se_method Method standard error estimation: \"bootstrap\": Bootstrap standard errors (default) \"influence\": Influence function-based standard errors \"none\": standard error estimation n_boot Number bootstrap replications (default: 500). conf_level Confidence level intervals (default: 0.95). stratified_boot Logical indicating whether use stratified bootstrap preserves source/target ratio (default: TRUE). Recommended transportability analysis. cross_fit Logical indicating whether use cross-fitting nuisance model estimation (default: FALSE). n_folds Number folds cross-fitting (default: 5). parallel Logical indicating whether use parallel processing bootstrap (default: FALSE). ncores Number cores parallel processing (default: NULL, uses available cores minus one). ... Additional arguments passed internal functions.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_mse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Transportable Mean Squared Error — tr_mse","text":"object class c(\"tr_mse\", \"tr_performance\") containing: estimate Point estimate transportable MSE se Standard error (computed) ci_lower Lower confidence interval bound ci_upper Upper confidence interval bound estimator Estimator used analysis Analysis type naive_estimate Naive MSE comparison n_target Number target observations n_source Number source observations treatment_level Treatment level","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_mse.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate Transportable Mean Squared Error — tr_mse","text":"function implements estimators transporting prediction model performance source population (typically RCT) target population. Transportability Analysis: Uses outcome data source/RCT population estimate performance target population. Requires: Selection model: P(S=0|X) Propensity model source: P(=1|X, S=1) Outcome model trained source data Joint Analysis: Pools source target data estimate performance target population. efficient populations outcome data. observational analysis (single population), use cf_mse() instead.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/tr_mse.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate Transportable Mean Squared Error — tr_mse","text":"Voter, S. R., et al. (2025). \"Transportability machine learning-based counterfactual prediction models application CASS.\" Diagnostic Prognostic Research, 9(4). doi:10.1186/s41512-025-00201-y Boyer, C. B., Dahabreh, . J., & Steingrimsson, J. . (2025). \"Estimating evaluating counterfactual prediction models.\" Statistics Medicine, 44(23-24), e70287. doi:10.1002/sim.70287","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/reference/tr_mse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate Transportable Mean Squared Error — tr_mse","text":"","code":"# Generate example data with source (RCT) and target populations set.seed(123) n <- 1000 # Covariates x <- rnorm(n) # Source indicator (S=1 for RCT, S=0 for target) s <- rbinom(n, 1, plogis(0.5 - 0.3 * x)) # Treatment (randomized in source, confounded in target) a <- ifelse(s == 1,             rbinom(n, 1, 0.5),  # Randomized in RCT             rbinom(n, 1, plogis(-0.5 + 0.5 * x)))  # Confounded in target # Outcome y <- rbinom(n, 1, plogis(-1 + x - 0.5 * a)) # Predictions from some model pred <- plogis(-1 + 0.8 * x)  # Estimate transportable MSE result <- tr_mse(   predictions = pred,   outcomes = y,   treatment = a,   source = s,   covariates = data.frame(x = x),   treatment_level = 0,   analysis = \"transport\",   estimator = \"dr\",   se_method = \"none\"  # Skip SE for speed ) print(result) #>  #> Transportable MSE Estimation #> ---------------------------------------------  #> Analysis: transport  #> Estimator: dr  #> Treatment level: 0  #> N target: 376  | N source: 624  #>  #> Estimate: 0.1713 #>  #> Naive estimate: 0.1577  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/transport_sim.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated Transportability Data — transport_sim","title":"Simulated Transportability Data — transport_sim","text":"simulated dataset demonstrating transportability analysis prediction model performance. data includes source (RCT) target populations, treatment randomized source confounded target.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/transport_sim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulated Transportability Data — transport_sim","text":"","code":"transport_sim"},{"path":"https://boyercb.github.io/cfperformance/reference/transport_sim.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated Transportability Data — transport_sim","text":"data frame 1500 rows 7 variables: age Standardized age (mean 0, SD 1) biomarker Continuous biomarker value smoking Binary smoking status (1 = smoker, 0 = non-smoker) source Population indicator (1 = source/RCT, 0 = target). RCT patients tend younger less likely smoke. treatment Binary treatment indicator (1 = treated, 0 = untreated). Randomized (50/50) source, confounded age biomarker target. event Binary outcome indicating event (1 = event, 0 = event). Risk depends age, biomarker, smoking, reduced treatment. risk_score Predicted probability event model trained source population, using age, biomarker, smoking predictors.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/transport_sim.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Simulated Transportability Data — transport_sim","text":"Simulated data based framework Voter et al. (2025). \"Transportability machine learning-based counterfactual prediction models.\" Diagnostic Prognostic Research, 9(4). doi:10.1186/s41512-025-00201-y","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/transport_sim.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simulated Transportability Data — transport_sim","text":"data generating process creates realistic heterogeneity source (RCT) target populations: Selection RCT: RCT patients younger average less likely smokers, reflecting typical trial enrollment patterns. Treatment assignment: Source: Randomized P(=1) = 0.5 Target: Confounded P(=1|X) = plogis(-0.3 + 0.015*age + 0.2*biomarker) Outcome model: P(Y=1|X,) = plogis(-2.5 + 0.03*age + 0.4*biomarker + 0.3*smoking - 0.5*) creates scenario naive performance estimates RCT generalize target population due covariate shift.","code":""},{"path":"https://boyercb.github.io/cfperformance/reference/transport_sim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulated Transportability Data — transport_sim","text":"","code":"data(transport_sim) head(transport_sim) #>           age  biomarker smoking source treatment event risk_score #> 1  0.61691842 -0.5700952       0      0         1     0  0.2603127 #> 2  0.04053456  0.3601832       0      1         1     1  0.2962904 #> 3  0.76704199  0.4024288       1      1         0     1  0.3855963 #> 4  1.25892520 -1.5801491       0      0         1     1  0.2253197 #> 5  0.37086452  0.1336976       0      0         0     1  0.2972428 #> 6 -0.15499910  0.5227082       0      1         0     0  0.2978064  # Population sizes table(transport_sim$source)  # 0=target, 1=source #>  #>   0   1  #> 698 802   # Estimate transportable MSE under no treatment result <- tr_mse(   predictions = transport_sim$risk_score,   outcomes = transport_sim$event,   treatment = transport_sim$treatment,   source = transport_sim$source,   covariates = transport_sim[, c(\"age\", \"biomarker\", \"smoking\")],   treatment_level = 0,   analysis = \"transport\",   estimator = \"dr\" ) result #>  #> Transportable MSE Estimation #> ---------------------------------------------  #> Analysis: transport  #> Estimator: dr  #> Treatment level: 0  #> N target: 698  | N source: 802  #>  #> Estimate: 0.2432 (SE: 0.0102 ) #> 95% CI: [0.2232, 0.263] #>  #> Naive estimate: 0.227  #>"},{"path":"https://boyercb.github.io/cfperformance/reference/variance.html","id":null,"dir":"Reference","previous_headings":"","what":"Variance Estimation for Counterfactual Performance Measures — variance","title":"Variance Estimation for Counterfactual Performance Measures — variance","text":"Functions computing standard errors confidence intervals using influence function-based bootstrap methods.","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"cfperformance-020","dir":"Changelog","previous_headings":"","what":"cfperformance 0.2.0","title":"cfperformance 0.2.0","text":"Major release adding transportability estimators Voter et al. (2025) evaluating prediction model performance transporting source population (e.g., RCT) target population.","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"transportability-functions-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Transportability Functions","title":"cfperformance 0.2.0","text":"tr_mse() - Transportable MSE estimation naive, om, ipw, dr estimators tr_auc() - Transportable AUC estimation estimators tr_calibration() - Transportable calibration curves ICI, E50, E90, Emax","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"analysis-modes-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Analysis Modes","title":"cfperformance 0.2.0","text":"Transport analysis (analysis = \"transport\"): Use source/RCT outcomes estimate performance target population Joint analysis (analysis = \"joint\"): Pool source target data potentially efficient estimation","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"inference-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Inference","title":"cfperformance 0.2.0","text":"Bootstrap standard errors stratified sampling option (stratified_boot = TRUE) preserve source/target ratio Influence function-based standard errors tr_mse() (estimators)","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"new-data-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"New Data","title":"cfperformance 0.2.0","text":"transport_sim - Simulated dataset source (RCT) target populations transportability examples (n = 1,500)","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"documentation-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Documentation","title":"cfperformance 0.2.0","text":"New vignette: “Transportability Analysis cfperformance” Complete roxygen documentation new functions Updated README transportability examples","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"s3-methods-for-tr_-functions-0-2-0","dir":"Changelog","previous_headings":"","what":"S3 Methods for tr_* Functions","title":"cfperformance 0.2.0","text":"print.tr_performance() - Print method transportability results summary.tr_performance() - Detailed summary coef.tr_performance() - Extract point estimates confint.tr_performance() - Confidence intervals plot.tr_calibration() - Calibration curve visualization","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"references-0-2-0","dir":"Changelog","previous_headings":"","what":"References","title":"cfperformance 0.2.0","text":"Voter SR, et al. Transportability machine learning-based counterfactual prediction models application CASS. Diagnostic Prognostic Research. 2025; 9(4). doi:10.1186/s41512-025-00201-y","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"cfperformance-010","dir":"Changelog","previous_headings":"","what":"cfperformance 0.1.0","title":"cfperformance 0.1.0","text":"Initial release implementing methods Boyer, Dahabreh & Steingrimsson (2025), “Estimating evaluating counterfactual prediction models.”","code":""},{"path":[]},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"performance-metrics-0-1-0","dir":"Changelog","previous_headings":"Features","what":"Performance Metrics","title":"cfperformance 0.1.0","text":"cf_mse() - Counterfactual MSE/Brier score estimation cf_auc() - Counterfactual AUC estimation cf_calibration() - Counterfactual calibration curves ICI, E50, E90, Emax","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"estimators-0-1-0","dir":"Changelog","previous_headings":"Features","what":"Estimators","title":"cfperformance 0.1.0","text":"Naive estimator (subset-based) Conditional Loss (CL) / Outcome modeling estimator Inverse Probability Weighting (IPW) estimator Doubly Robust (DR) estimator","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"inference-0-1-0","dir":"Changelog","previous_headings":"Features","what":"Inference","title":"cfperformance 0.1.0","text":"Bootstrap standard errors parallel support Influence function-based analytic standard errors Cross-fitting (sample splitting) DR estimation Confidence intervals via normal approximation percentile bootstrap","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"model-selection-0-1-0","dir":"Changelog","previous_headings":"Features","what":"Model Selection","title":"cfperformance 0.1.0","text":"cf_cv() - K-fold cross-validation counterfactual metrics cf_compare() - Compare multiple prediction models","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"data-0-1-0","dir":"Changelog","previous_headings":"Features","what":"Data","title":"cfperformance 0.1.0","text":"cvd_sim - Simulated cardiovascular disease dataset examples","code":""},{"path":"https://boyercb.github.io/cfperformance/news/index.html","id":"references-0-1-0","dir":"Changelog","previous_headings":"","what":"References","title":"cfperformance 0.1.0","text":"Boyer CB, Dahabreh IJ, Steingrimsson JA. Counterfactual prediction model performance. Statistics Medicine. 2025; 44(23-24):e70287. doi:10.1002/sim.70287","code":""}]
