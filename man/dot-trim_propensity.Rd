% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{.trim_propensity}
\alias{.trim_propensity}
\title{Trim propensity scores to avoid extreme values}
\usage{
.trim_propensity(
  ps,
  method = "absolute",
  bounds = c(0.01, 0.99),
  weights = NULL
)
}
\arguments{
\item{ps}{Numeric vector of propensity scores (probabilities).}

\item{method}{Character string specifying trimming method:
\itemize{
\item \code{"absolute"}: Trim to fixed probability bounds (default)
\item \code{"quantile"}: Trim based on quantiles of the propensity distribution
\item \code{"none"}: No trimming
}}

\item{bounds}{Numeric vector of length 2 specifying trimming bounds.
For \code{method = "absolute"}: probability bounds (default: c(0.01, 0.99)).
For \code{method = "quantile"}: quantile bounds (default: c(0.01, 0.99)).}

\item{weights}{Optional numeric vector of weights for quantile calculation.
Only used when \code{method = "quantile"}.}
}
\value{
Trimmed propensity scores.
}
\description{
Internal function for trimming propensity scores using either absolute bounds
or quantile-based trimming.
}
\details{
For \code{method = "absolute"}, propensity scores are clipped to \verb{[bounds[1], bounds[2]]}.
This is the most common approach and ensures that no propensity score falls below
or above the specified thresholds.

For \code{method = "quantile"}, the bounds are computed as the \code{bounds[1]} and \code{bounds[2]}
quantiles of the propensity score distribution, and then scores are clipped to
these data-dependent bounds. This can be useful when the propensity score
distribution varies across datasets.
}
\keyword{internal}
