% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cross_validation.R
\name{cf_compare}
\alias{cf_compare}
\title{Compare Multiple Prediction Models}
\usage{
cf_compare(
  models,
  data,
  treatment,
  treatment_level = 0,
  nuisance_covariates = NULL,
  metric = c("mse", "auc", "both"),
  estimator = c("dr", "cl", "om", "ipw", "naive"),
  method = c("cv", "holdout"),
  K = 5,
  test_prop = 0.2,
  seed = NULL,
  ...
)
}
\arguments{
\item{models}{A named list of model formulas or fitted model objects.}

\item{data}{A data frame containing all variables.}

\item{treatment}{Character string naming the treatment variable.}

\item{treatment_level}{The counterfactual treatment level (default: 0).}

\item{nuisance_covariates}{Character vector of covariate names for nuisance
models. If NULL, inferred from model formulas.}

\item{metric}{Character string specifying the performance metric.}

\item{estimator}{Character string specifying the estimator.}

\item{method}{Comparison method: \code{"cv"} for cross-validation (default),
or \code{"holdout"} for train/test split.}

\item{K}{Number of folds for CV (default: 5).}

\item{test_prop}{Proportion of data for test set if method = "holdout".}

\item{seed}{Random seed for reproducibility.}

\item{...}{Additional arguments passed to cf_cv or internal functions.}
}
\value{
An object of class \code{cf_compare} containing:
\item{results}{Data frame with model performance comparisons}
\item{best_model}{Name of the best performing model}
\item{metric}{Performance metric used}
\item{method}{Comparison method used}
}
\description{
Compares the counterfactual performance of multiple prediction models
using cross-validation or a held-out test set.
}
\examples{
# Generate example data
set.seed(123)
n <- 300
data <- data.frame(
  x1 = rnorm(n),
  x2 = rnorm(n),
  x3 = rnorm(n)
)
data$a <- rbinom(n, 1, plogis(-0.5 + 0.5 * data$x1))
data$y <- rbinom(n, 1, plogis(-1 + data$x1 + 0.5 * data$x2 - 0.3 * data$a))

# Compare models
models <- list(
  "Simple" = y ~ x1,
  "Full" = y ~ x1 + x2 + x3
)

comparison <- cf_compare(
  models = models,
  data = data,
  treatment = "a",
  metric = "mse",
  K = 3
)
print(comparison)
}
